<div class="consultor-form-container">
  <h2>{{ isEditMode ? 'Editar Consultor' : 'Novo Consultor' }}</h2>

  <form (ngSubmit)="submit()" *ngIf="canEditThisConsultor">
    <div>
      <label>Nome Completo:</label>
      <input type="text" [(ngModel)]="consultor.nome" name="nome" required>
    </div>

    <div>
      <label>Email:</label>
      <input 
        type="email" 
        [(ngModel)]="consultor.email" 
        name="email" 
        [disabled]="isEditMode && !isAdmin"
        required>
      <small *ngIf="isEditMode && !isAdmin" style="color: #6b7280; display: block; margin-top: 0.25rem;">
        O email não pode ser alterado
      </small>
    </div>

    <div *ngIf="!isEditMode">
      <label>Senha:</label>
      <input type="password" [(ngModel)]="password" name="password" required>
    </div>

    <div *ngIf="isEditMode">
      <label>Senha Atual (obrigatória para alterar senha):</label>
      <input type="password" [(ngModel)]="currentPassword" name="currentPassword" placeholder="Digite a senha atual">
      
      <label style="margin-top: 0.5rem;">Nova Senha (deixe em branco para não alterar):</label>
      <input type="password" [(ngModel)]="password" name="password" placeholder="Digite a nova senha">
    </div>

    <div>
      <label>Telefone:</label>
      <input type="text" [(ngModel)]="consultor.telefone" name="telefone" required>
    </div>

    <div>
      <label>Área de Especialização:</label>
      <input type="text" [(ngModel)]="consultor.areaEspecializacao" name="areaEspecializacao" required>
    </div>

    <div *ngIf="errorMessage" class="error">
      {{ errorMessage }}
    </div>

    <div class="actions">
      <button type="submit">{{ isEditMode ? 'Atualizar' : 'Criar' }}</button>
      <button type="button" (click)="cancel()">Cancelar</button>
    </div>
  </form>
</div>
