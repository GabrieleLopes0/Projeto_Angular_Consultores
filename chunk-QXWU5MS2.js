import{a as R}from"./chunk-V5LPC4OS.js";import"./chunk-RAA6PBRF.js";import{a as L,b as F,e as N,g as T,h as z,i as D,k as V}from"./chunk-T5VEEF4Z.js";import{B as P,F as p,J as u,K as o,L as n,N as x,O as d,P as f,R as r,S as g,U as b,V as h,W as M,ca as v,da as S,ea as E,h as O,ja as w,ka as y,ma as A,n as m,o as _,oa as k,p as C,ta as I,w as a}from"./chunk-E6E6T7QQ.js";function W(s,e){if(s&1&&(o(0,"option",12),r(1),n()),s&2){let t=e.$implicit;u("value",t),a(),g(t)}}function q(s,e){s&1&&(o(0,"div",13),r(1,"Carregando..."),n())}function j(s,e){if(s&1){let t=x();o(0,"tr")(1,"td"),r(2),n(),o(3,"td"),r(4),n(),o(5,"td"),r(6),n(),o(7,"td"),r(8),n(),o(9,"td"),r(10),n(),o(11,"td")(12,"button",2),d("click",function(){let c=_(t).$implicit,l=f(2);return C(l.editConsultor(c._id))}),r(13,"Editar"),n(),o(14,"button",2),d("click",function(){let c=_(t).$implicit,l=f(2);return C(l.deleteConsultor(c._id))}),r(15,"Excluir"),n()()()}if(s&2){let t=e.$implicit,i=f(2);a(2),g(t.nome),a(2),g(t.email),a(2),g(t.telefone),a(2),g(t.areaEspecializacao),a(2),g(i.formatDate(t.dataCadastro||t.createdAt))}}function U(s,e){if(s&1&&(o(0,"table")(1,"thead")(2,"tr")(3,"th"),r(4,"Nome"),n(),o(5,"th"),r(6,"Email"),n(),o(7,"th"),r(8,"Telefone"),n(),o(9,"th"),r(10,"\xC1rea"),n(),o(11,"th"),r(12,"Data Cadastro"),n(),o(13,"th"),r(14,"A\xE7\xF5es"),n()()(),o(15,"tbody"),p(16,j,16,5,"tr",14),n()()),s&2){let t=f();a(16),u("ngForOf",t.filteredConsultores)}}function Y(s,e){s&1&&(o(0,"div",15)(1,"p"),r(2,"Nenhum consultor encontrado"),n(),o(3,"p",16),r(4,' Se voc\xEA acabou de criar um consultor, pode ser que ainda n\xE3o tenha nenhum cadastrado. Clique em "Novo Consultor" para come\xE7ar. '),n()())}var B=class s{consultorService=m(R);authService=m(I);router=m(A);route=m(y);routerSubscription;consultores=[];filteredConsultores=[];busca="";areaFiltro="";areas=[];loading=!1;allConsultores=[];ngOnInit(){this.refreshData(),this.routerSubscription=this.router.events.pipe(O(e=>e instanceof w)).subscribe(e=>{let t=e.urlAfterRedirects||e.url;(t==="/consultores"||t.startsWith("/consultores"))&&setTimeout(()=>{this.refreshData()},50)})}refreshData(){this.loadAllAreas(),this.loadConsultores()}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}loadAllAreas(){this.consultorService.getAll().subscribe({next:e=>{this.allConsultores=e||[],this.extractAreas()},error:e=>{console.error("Erro ao carregar \xE1reas:",e),this.allConsultores=[],this.areas=[]}})}loadConsultores(){this.loading=!0,this.consultorService.getAll(this.busca,this.areaFiltro).subscribe({next:e=>{this.consultores=e,this.filteredConsultores=e,this.loading=!1},error:e=>{console.error("Erro ao carregar consultores:",e),console.error("URL tentada:",e.url||"N/A"),console.error("Status:",e.status||"N/A"),this.loading=!1,this.consultores=[],this.filteredConsultores=[];let t="Erro ao conectar com o servidor.";e.status===0?t+=`

O backend n\xE3o est\xE1 respondendo. Verifique se est\xE1 rodando em http://localhost:3001`:e.status===500?t+=`

Erro no servidor (500). Verifique os logs do backend.`:e.status===404&&(t+=`

Endpoint n\xE3o encontrado. Verifique a URL da API.`),alert(t)}})}extractAreas(){let e=new Set;this.allConsultores.forEach(t=>{t.areaEspecializacao&&t.areaEspecializacao.trim()!==""&&e.add(t.areaEspecializacao.trim())}),this.areas=Array.from(e).sort(),console.log("\xC1reas extra\xEDdas:",this.areas)}onBuscaChange(){this.loadConsultores()}onAreaChange(){this.loadConsultores()}deleteConsultor(e){confirm("Tem certeza que deseja excluir este consultor? A credencial do Firebase tamb\xE9m ser\xE1 removida.")&&this.consultorService.delete(e).subscribe({next:t=>{this.loadAllAreas(),this.loadConsultores(),t?.warning&&alert(`\u26A0\uFE0F Consultor exclu\xEDdo, mas a credencial do Firebase pode ainda existir.

Configure o Firebase Admin SDK no backend para exclus\xE3o autom\xE1tica.
Veja: backend/CONFIGURAR_FIREBASE_ADMIN.md`)},error:t=>{console.error("Erro ao excluir consultor:",t),alert("Erro ao excluir consultor")}})}editConsultor(e){this.router.navigate(["/consultores/editar",e])}newConsultor(){this.router.navigate(["/consultores/novo"])}logout(){this.authService.logout()}formatDate(e){if(!e)return"";let t=new Date(e);return isNaN(t.getTime())?"":t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=P({type:s,selectors:[["app-consultores-list"]],decls:18,vars:6,consts:[[1,"consultores-list-container"],[1,"header"],[3,"click"],[1,"actions"],[1,"filters"],["type","text","placeholder","Buscar por nome ou email...",3,"ngModelChange","input","ngModel"],[3,"ngModelChange","change","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","loading",4,"ngIf"],[4,"ngIf"],["class","no-data",4,"ngIf"],[3,"value"],[1,"loading"],[4,"ngFor","ngForOf"],[1,"no-data"],[2,"font-size","0.85rem","color","#9ca3af","margin-top","0.5rem"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),r(3,"Consultores"),n(),o(4,"button",2),d("click",function(){return i.logout()}),r(5,"Sair"),n()(),o(6,"div",3)(7,"button",2),d("click",function(){return i.newConsultor()}),r(8,"Novo Consultor"),n(),o(9,"div",4)(10,"input",5),M("ngModelChange",function(l){return h(i.busca,l)||(i.busca=l),l}),d("input",function(){return i.onBuscaChange()}),n(),o(11,"select",6),M("ngModelChange",function(l){return h(i.areaFiltro,l)||(i.areaFiltro=l),l}),d("change",function(){return i.onAreaChange()}),o(12,"option",7),r(13,"Todas as \xE1reas"),n(),p(14,W,2,2,"option",8),n()()(),p(15,q,2,0,"div",9)(16,U,17,1,"table",10)(17,Y,5,0,"div",11),n()),t&2&&(a(10),b("ngModel",i.busca),a(),b("ngModel",i.areaFiltro),a(3),u("ngForOf",i.areas),a(),u("ngIf",i.loading),a(),u("ngIf",!i.loading&&i.filteredConsultores.length>0),a(),u("ngIf",!i.loading&&i.filteredConsultores.length===0))},dependencies:[E,v,S,k,V,z,D,L,T,F,N],styles:[".consultores-list-container[_ngcontent-%COMP%]{max-width:1100px;margin:2.5rem auto;padding:2rem 2.5rem;box-sizing:border-box;background-color:#fff;border-radius:1rem;box-shadow:0 8px 30px #0f172a14;font-family:Poppins;color:#183878}.consultores-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.5rem}.consultores-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700;color:#183878}.consultores-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.55rem 1.1rem;border-radius:.6rem;border:1px solid rgba(148,163,184,.9);background-color:#fff;color:#526689;font-size:.85rem;font-weight:600;text-transform:uppercase;cursor:pointer;transition:background .15s ease,color .15s ease,box-shadow .15s ease}.consultores-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f3f4f6;color:#183878;box-shadow:0 2px 10px #94a3b859}.consultores-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:1rem;margin-bottom:1.5rem}.consultores-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:.7rem 1.4rem;border-radius:.6rem;border:none;background-color:#183878;color:#f9fafb;font-size:.9rem;font-weight:600;text-transform:uppercase;cursor:pointer;box-shadow:0 2px 18px #07034659;transition:background .15s ease,transform .08s ease,box-shadow .15s ease}.consultores-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:#122f62;transform:translateY(-1px);box-shadow:0 4px 20px #07034666}.consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.75rem;flex-wrap:wrap}.consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.55rem .8rem;border-radius:.6rem;border:1px solid rgba(148,163,184,.9);font-size:.9rem;color:#526689;min-width:180px;outline:none;box-sizing:border-box;transition:box-shadow .15s ease,border-color .15s ease}.consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#183878;box-shadow:0 0 0 1px #18387880}.consultores-list-container[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%], .consultores-list-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{margin-top:1rem;font-size:.95rem;color:#526689}.consultores-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:.5rem;font-size:.9rem}.consultores-list-container[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#f3f4f6}.consultores-list-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .consultores-list-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.75rem .8rem;text-align:left}.consultores-list-container[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#526689;text-transform:uppercase;font-size:.78rem;border-bottom:1px solid rgba(209,213,219,.9)}.consultores-list-container[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid rgba(229,231,235,.9)}.consultores-list-container[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9fafb}.consultores-list-container[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#eef2ff}.consultores-list-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.4rem .8rem;border-radius:.5rem;border:none;font-size:.8rem;font-weight:600;text-transform:uppercase;cursor:pointer;margin-right:.4rem;transition:background .15s ease,transform .08s ease,box-shadow .15s ease}.consultores-list-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:#e5efff;color:#183878}.consultores-list-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:#d1ddff;transform:translateY(-1px)}.consultores-list-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#fee2e2;color:#7f1d1d}.consultores-list-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#fecaca;transform:translateY(-1px)}@media (max-width: 768px){.consultores-list-container[_ngcontent-%COMP%]{margin:1.5rem;padding:1.5rem}.consultores-list-container[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]{width:100%}.consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .consultores-list-container[_ngcontent-%COMP%]   .filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;min-width:0}.consultores-list-container[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{font-size:.85rem}}"]})};export{B as ConsultoresList};
